var crate=function(){var a={init:function(b){if(a.isSet(b.setBody)){var c=function(b,f){"object"==typeof b?(a[f+"Delay"]="number"==typeof b.delay?b.delay:!1,a[f+"Action"]="function"==typeof b.action?b.action:!1):(a[f+"Delay"]="number"==typeof b?b:!1,a[f+"Action"]="function"==typeof b?b:!1)};a.destroyCrates();c(b.onOpen,"crateOpening");c(b.onClosing,"crateClosing");a.createCrate(b)}else return console.error("crate.js: setBody is required in the object passed to the init function."),!1},isSet:function(a){return"undefined"===
typeof a||""===a||null===a?!1:!0},createCrate:function(b){function c(a,b,c){a=document.createElement(a);a.className=b;c.appendChild(a);return a}function d(a,b,c){"click"===b?a.addEventListener?a.addEventListener(b,c):a.attachEvent&&a.attachEvent("on"+b,c):"keyup"===b&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent(b,c,!1))}a.crateParent=a.isSet(b.setParent)?document.querySelector(b.setParent):document.body;a.isPositioned=a.isSet(b.setPosition);a.crateTop=a.isPositioned?
b.setPosition[0]:null;a.crateLeft=a.isPositioned?b.setPosition[1]:null;a.crateTitle=a.isSet(b.setTitle)?b.setTitle:null;a.crateBody=b.setBody;a.crateFooter=a.isSet(b.setFooter)?b.setFooter:null;a.isSet(b.closeActions)?(a.isSet(b.closeActions)&&!a.isSet(b.closeActions.button)?a.crateButton=!1:a.crateButton=a.isSet(b.closeActions.button)?b.closeActions.button:!0,a.crateClickIn=a.isSet(b.closeActions.clickIn)?b.closeActions.clickIn:!1,a.crateClickOut=a.isSet(b.closeActions.clickOut)?b.closeActions.clickOut:
!1,a.cratePressKeys=a.isSet(b.closeActions.pressKeys)?b.closeActions.pressKeys:!1):a.crateButton=!0;a.crateOverlay=a.isSet(b.setOverlay)?b.setOverlay:"rgba(0,0,0,.8)";a.crateClasses=a.isSet(b.attachClass)?b.attachClass:!1;a.crateContainer=c("div","crate-contain",a.crateParent);a.styleElement(a.crateContainer,{display:"none",top:"0",left:"0",right:"0",bottom:"0","z-index":"500",background:a.crateOverlay});a.crateContent=c("div","crate-content",a.crateParent);a.isPositioned?a.isSet(b.setPosition[0])&&
a.isSet(b.setPosition[1])?a.styleElement(a.crateContent,{display:"none","z-index":"501",top:a.crateTop,left:a.crateLeft}):a.isSet(b.setPosition[0])&&!a.isSet(b.setPosition[1])?a.styleElement(a.crateContent,{display:"none","z-index":"501",top:a.crateTop,left:"50%",transform:"translate(-50%, 0)",webkitTransform:"translate(-50%,0)"}):!a.isSet(b.setPosition[0])&&a.isSet(b.setPosition[1])&&a.styleElement(a.crateContent,{display:"none","z-index":"501",top:"50%",left:a.crateLeft,transform:"translate(0, -50%)",
webkitTransform:"translate(-50%,0)"}):a.styleElement(a.crateContent,{display:"none","z-index":"501",top:"50%",left:"50%",transform:"translate(-50%, -50%)",webkitTransform:"translate(-50%,-50%)"});a.isSet(b.setParent)?(a.styleElement(a.crateContainer,{position:"absolute"}),a.styleElement(a.crateContent,{position:"absolute"})):(a.styleElement(a.crateContainer,{position:"fixed"}),a.styleElement(a.crateContent,{position:"fixed"}));a.isSet(b.setTitle)?(a.crateTitle=c("div","crate-title",a.crateContent),
a.crateTitle.innerHTML=b.setTitle):!a.isSet(b.setTitle)&&a.crateButton&&(a.crateTitle=c("div","crate-title",a.crateContent));a.isSet(b.setBody)&&(a.crateBody=c("div","crate-body",a.crateContent),a.crateBody.innerHTML=b.setBody);a.isSet(b.setFooter)&&(a.crateFooter=c("div","crate-footer",a.crateContent),a.crateFooter.innerHTML=b.setFooter);a.isSet(b.closeActions)?(a.crateButton&&(a.crateClose=c("div","crate-close",a.crateTitle),d(a.crateClose,"click",a.destroyCrates)),a.crateClickIn&&d(a.crateContent,
"click",a.destroyCrates),a.crateClickOut&&d(a.crateContainer,"click",a.destroyCrates),a.cratePressKeys&&d(window,"keyup",function(b){for(var c=0;c<a.cratePressKeys.length;c++)if(b.keyCode==a.cratePressKeys[c]){a.destroyCrates();break}})):(a.crateClose=c("div","crate-close",a.crateTitle),d(a.crateClose,"click",a.destroyCrates));a.crateClasses&&a.addClasses(a.crateClasses);a.openCrate()},styleElement:function(a,c){for(e in c)a.style[e]=String(c[e])},addClasses:function(a){for(e in a)el=document.querySelector(e),
el.className=el.className+" "+a[e]},destroyCrates:function(){if("undefined"!==typeof a.crateContainer&&"undefined"!==typeof a.crateContent){var b=function(){a.crateContainer.parentNode.removeChild(a.crateContainer);a.crateContent.parentNode.removeChild(a.crateContent);delete a.crateContainer;delete a.crateContents;a.isSet(a.crateClosingAction)&&"function"==typeof a.crateClosingAction&&a.crateClosingAction()};a.isSet(a.crateClosingDelay)?setTimeout(b,a.crateClosingDelay):b()}},openCrate:function(){function b(){a.isSet(a.crateOpeningAction)&&
"function"==typeof a.crateOpeningAction&&a.crateOpeningAction();a.showCrate()}a.isSet(a.crateOpeningDelay)?setTimeout(b,a.crateOpeningDelay):b()},showCrate:function(){a.styleElement(a.crateContainer,{display:"block"});a.styleElement(a.crateContent,{display:"block"})},hideCrate:function(){a.styleElement(a.crateContainer,{display:"none"});a.styleElement(a.crateContent,{display:"none"})},toggleCrate:function(){"none"===a.crateContainer.style.display?a.showCrate():a.hideCrate()}};return a}();
